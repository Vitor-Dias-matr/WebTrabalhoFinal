"use strict";Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),o=r.length>>>0;if(0===o)return!1;for(var n=0|t,i=Math.max(n>=0?n:o-Math.abs(n),0);i<o;){if(r[i]===e)return!0;i++}return!1}}),function(){function e(e){var t=document.querySelector(".emergency-trigger"),r=document.createElement("div");if(r.innerHTML=e,t.innerHTML=e,t.classList.contains("hide")&&t.classList.remove("hide"),document.querySelector("[data-altered-color]")&&document.querySelector("[data-altered-color]").classList.add("active-sense-icon"),document.querySelector(".trigger-remove-prod")&&null!==document.querySelector(".trigger-remove-prod")&&(document.querySelector(".trigger-remove-prod").style.display="none"),document.querySelector(".mktplacetooltip")&&null!==document.querySelector(".mktplacetooltip")){var o=document.querySelector(".mktplacetooltip");o.style.marginLeft="4px",o.cloneNode(!0);var n=document.querySelector(".product-seller-name");n&&n.insertBefore(o,n.nextSibling)}}function t(e){var t=document.querySelector(".emergency-trigger");t.classList.contains("hide")||t.classList.add("hide");var r=sessionStorage.getItem("emergency-trigger");if(!r)return void sessionStorage.setItem("emergency-trigger",e);var o=r.split(",");o.push(e),sessionStorage.setItem("emergency-trigger",o)}function r(r,o){var n={method:"get",type:"html",data:{sku:r,sellerId:o},success:function(o){"false"!==o?e(o):t(r)},error:function(e){console.error("emergency trigger error: ",e)}};window.freedom.restClient.request("/stock",n)}function o(e){var t=document.querySelector(".emergency-trigger");if(e&&t){var o=null,n=null;e instanceof HTMLElement?(o=e.getAttribute("data-sku"),n=e.getAttribute("data-sellerid")):(o=e.sku,n=e.sellerId);var i=sessionStorage.getItem("emergency-trigger");if(i){var s=i.split(",").includes(o);s?t.classList.contains("hide")||t.classList.add("hide"):r(o,n)}else r(o,n)}}var n=document.querySelector(".product__size--list")?document.querySelectorAll(".product__size--list li span"):document.querySelectorAll("#buy-box .product-size-selector .sku-select .radio-options .active a");n&&1===n.length&&window.freedom.nsPubSub.pub("emergency-trigger-show-stock",n[0]),window.freedom.nsPubSub.sub("emergency-trigger-show-stock",o)}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9yZWZhY3RvcmluZy9fY29tcG9uZW50cy9wcm9kdWN0L2VtZXJnZW5jeS10cmlnZ2VyL2VtZXJnZW5jeS10cmlnZ2VyLXNob3ctc3RvY2svYWxsL2VtZXJnZW5jeS10cmlnZ2VyLXNob3ctc3RvY2subWluLmpzIl0sIm5hbWVzIjpbIkFycmF5IiwicHJvdG90eXBlIiwiaW5jbHVkZXMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwic2VhcmNoRWxlbWVudCIsImZyb21JbmRleCIsInRoaXMiLCJUeXBlRXJyb3IiLCJvIiwibGVuIiwibGVuZ3RoIiwibiIsImsiLCJNYXRoIiwibWF4IiwiYWJzIiwic2V0U3RvY2siLCJyZXN1bHQiLCJlbWVyZ2VuY3lUcmlnZ2VyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZWxlbWVudFRlbXAiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJyZW1vdmUiLCJhZGQiLCJzdHlsZSIsImRpc3BsYXkiLCJlbCIsIm1hcmdpbkxlZnQiLCJjbG9uZU5vZGUiLCJpbnMiLCJpbnNlcnRCZWZvcmUiLCJuZXh0U2libGluZyIsInNldENhY2hlU2Vzc2lvblN0b3JhZ2UiLCJza3UiLCJza3VTdG9yYWdlIiwic2Vzc2lvblN0b3JhZ2UiLCJnZXRJdGVtIiwic2V0SXRlbSIsInRlbXBTa3VTdG9yYWdlIiwic3BsaXQiLCJwdXNoIiwiZ2V0RW1lcmdlbmN5VGlnZ2VyIiwic2VsbGVySWQiLCJvcHRpb25zIiwibWV0aG9kIiwidHlwZSIsImRhdGEiLCJzdWNjZXNzIiwiZXJyb3IiLCJjb25zb2xlIiwid2luZG93IiwiZnJlZWRvbSIsInJlc3RDbGllbnQiLCJyZXF1ZXN0Iiwic2hvd0VtZXJnZW5jeVRyaWdnZXIiLCJkYXRhRWxlbWVudCIsIkVNRVJHRU5DWV9UUklHR0VSIiwiSFRNTEVsZW1lbnQiLCJnZXRBdHRyaWJ1dGUiLCJzdG9yYWdlRW1lcmdlbmN5VHJpZ2dlciIsInN0b3JlZCIsInVuaXF1ZVNpemUiLCJxdWVyeVNlbGVjdG9yQWxsIiwibnNQdWJTdWIiLCJwdWIiLCJzdWIiXSwibWFwcGluZ3MiOiJBQUFBLFlBSUtBLE9BQU1DLFVBQVVDLFVBQ25CQyxPQUFPQyxlQUFlSixNQUFNQyxVQUFXLFlBQ3JDSSxNQUFPLFNBQVNDLEVBQWVDLEdBRzdCLEdBQVksTUFBUkMsS0FDRixLQUFNLElBQUlDLFdBQVUsZ0NBR3RCLElBQUlDLEdBQUlQLE9BQU9LLE1BR1hHLEVBQU1ELEVBQUVFLFNBQVcsQ0FHdkIsSUFBWSxJQUFSRCxFQUNGLE9BQU8sQ0FlVCxLQVZBLEdBQUlFLEdBQWdCLEVBQVpOLEVBT0pPLEVBQUlDLEtBQUtDLElBQUlILEdBQUssRUFBSUEsRUFBSUYsRUFBTUksS0FBS0UsSUFBSUosR0FBSSxHQUcxQ0MsRUFBSUgsR0FBSyxDQUtkLEdBQUlELEVBQUVJLEtBQU9SLEVBQ1gsT0FBTyxDQUVUUSxLQUlGLE9BQU8sS0FNWixXQUVDLFFBQVNJLEdBQVNDLEdBQ2hCLEdBQUlDLEdBQW1CQyxTQUFTQyxjQUFjLHNCQUMxQ0MsRUFBY0YsU0FBU0csY0FBYyxNQWV6QyxJQWRBRCxFQUFZRSxVQUFZTixFQUV4QkMsRUFBaUJLLFVBQVlOLEVBQ3pCQyxFQUFpQk0sVUFBVUMsU0FBUyxTQUN0Q1AsRUFBaUJNLFVBQVVFLE9BQU8sUUFHakNQLFNBQVNDLGNBQWMseUJBQ3hCRCxTQUFTQyxjQUFjLHdCQUF3QkksVUFBVUcsSUFBSSxxQkFFM0RSLFNBQVNDLGNBQWMseUJBQThFLE9BQW5ERCxTQUFTQyxjQUFjLDBCQUMzRUQsU0FBU0MsY0FBYyx3QkFBd0JRLE1BQU1DLFFBQVUsUUFHOURWLFNBQVNDLGNBQWMscUJBQXNFLE9BQS9DRCxTQUFTQyxjQUFjLG9CQUE2QixDQUNuRyxHQUFJVSxHQUFLWCxTQUFTQyxjQUFjLG1CQUNoQ1UsR0FBR0YsTUFBTUcsV0FBYSxNQUN0QkQsRUFBR0UsV0FBVSxFQUNiLElBQUlDLEdBQU1kLFNBQVNDLGNBQWMsdUJBQzlCYSxJQUNEQSxFQUFJQyxhQUFhSixFQUFJRyxFQUFJRSxjQUsvQixRQUFTQyxHQUF1QkMsR0FDOUIsR0FBSW5CLEdBQW1CQyxTQUFTQyxjQUFjLHFCQUN6Q0YsR0FBaUJNLFVBQVVDLFNBQVMsU0FDdkNQLEVBQWlCTSxVQUFVRyxJQUFJLE9BRWpDLElBQUlXLEdBQWFDLGVBQWVDLFFBQVEsb0JBQ3hDLEtBQUtGLEVBRUgsV0FEQUMsZ0JBQWVFLFFBQVEsb0JBQXFCSixFQUc5QyxJQUFJSyxHQUFpQkosRUFBV0ssTUFBTSxJQUN0Q0QsR0FBZUUsS0FBS1AsR0FDcEJFLGVBQWVFLFFBQVEsb0JBQXFCQyxHQUc5QyxRQUFTRyxHQUFtQlIsRUFBS1MsR0FDL0IsR0FBSUMsSUFDRkMsT0FBUSxNQUNSQyxLQUFNLE9BQ05DLE1BQ0ViLElBQUtBLEVBQ0xTLFNBQVVBLEdBRVpLLFFBQVMsU0FBU2xDLEdBQ0QsVUFBWEEsRUFDRkQsRUFBU0MsR0FFVG1CLEVBQXVCQyxJQUczQmUsTUFBTyxTQUFTQSxHQUNkQyxRQUFRRCxNQUFNLDRCQUE2QkEsSUFHL0NFLFFBQU9DLFFBQVFDLFdBQVdDLFFBQVEsU0FBVVYsR0FHOUMsUUFBU1csR0FBcUJDLEdBQzVCLEdBQUlDLEdBQW9CekMsU0FBU0MsY0FBYyxxQkFDL0MsSUFBSXVDLEdBQ0VDLEVBQW1CLENBQ3JCLEdBQUl2QixHQUFNLEtBQ05TLEVBQVcsSUFDWGEsYUFBdUJFLGNBQ3pCeEIsRUFBTXNCLEVBQVlHLGFBQWEsWUFDL0JoQixFQUFXYSxFQUFZRyxhQUFhLG1CQUVwQ3pCLEVBQU1zQixFQUFZdEIsSUFDbEJTLEVBQVdhLEVBQVliLFNBRXpCLElBQUlpQixHQUEwQnhCLGVBQWVDLFFBQVEsb0JBQ3JELElBQU11QixFQUF5QixDQUM3QixHQUFJQyxHQUFTRCxFQUF3QnBCLE1BQU0sS0FBSzNDLFNBQVNxQyxFQUNwRDJCLEdBR0VKLEVBQWtCcEMsVUFBVUMsU0FBUyxTQUN4Q21DLEVBQWtCcEMsVUFBVUcsSUFBSSxRQUhsQ2tCLEVBQW1CUixFQUFLUyxPQU8xQkQsR0FBbUJSLEVBQUtTLElBTWhDLEdBQUltQixHQUFhOUMsU0FBU0MsY0FBYyx3QkFBMEJELFNBQVMrQyxpQkFBaUIsZ0NBQWtDL0MsU0FBUytDLGlCQUFpQix1RUFDcEpELElBQW9DLElBQXRCQSxFQUFXdkQsUUFDM0I0QyxPQUFPQyxRQUFRWSxTQUFTQyxJQUFJLCtCQUFnQ0gsRUFBVyxJQUd6RVgsT0FBT0MsUUFBUVksU0FBU0UsSUFBSSwrQkFBZ0NYIiwiZmlsZSI6Il9yZWZhY3RvcmluZy9fY29tcG9uZW50cy9wcm9kdWN0L2VtZXJnZW5jeS10cmlnZ2VyL2VtZXJnZW5jeS10cmlnZ2VyLXNob3ctc3RvY2svYWxsL2VtZXJnZW5jeS10cmlnZ2VyLXNob3ctc3RvY2subWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLmluY2x1ZGVzXG5pZiAoIUFycmF5LnByb3RvdHlwZS5pbmNsdWRlcykge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXkucHJvdG90eXBlLCAnaW5jbHVkZXMnLCB7XG4gICAgdmFsdWU6IGZ1bmN0aW9uKHNlYXJjaEVsZW1lbnQsIGZyb21JbmRleCkge1xuXG4gICAgICAvLyAxLiBMZXQgTyBiZSA/IFRvT2JqZWN0KHRoaXMgdmFsdWUpLlxuICAgICAgaWYgKHRoaXMgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInRoaXNcIiBpcyBudWxsIG9yIG5vdCBkZWZpbmVkJyk7XG4gICAgICB9XG5cbiAgICAgIHZhciBvID0gT2JqZWN0KHRoaXMpO1xuXG4gICAgICAvLyAyLiBMZXQgbGVuIGJlID8gVG9MZW5ndGgoPyBHZXQoTywgXCJsZW5ndGhcIikpLlxuICAgICAgdmFyIGxlbiA9IG8ubGVuZ3RoID4+PiAwO1xuXG4gICAgICAvLyAzLiBJZiBsZW4gaXMgMCwgcmV0dXJuIGZhbHNlLlxuICAgICAgaWYgKGxlbiA9PT0gMCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIDQuIExldCBuIGJlID8gVG9JbnRlZ2VyKGZyb21JbmRleCkuXG4gICAgICAvLyAgICAoSWYgZnJvbUluZGV4IGlzIHVuZGVmaW5lZCwgdGhpcyBzdGVwIHByb2R1Y2VzIHRoZSB2YWx1ZSAwLilcbiAgICAgIHZhciBuID0gZnJvbUluZGV4IHwgMDtcblxuICAgICAgLy8gNS4gSWYgbiDiiaUgMCwgdGhlblxuICAgICAgLy8gIGEuIExldCBrIGJlIG4uXG4gICAgICAvLyA2LiBFbHNlIG4gPCAwLFxuICAgICAgLy8gIGEuIExldCBrIGJlIGxlbiArIG4uXG4gICAgICAvLyAgYi4gSWYgayA8IDAsIGxldCBrIGJlIDAuXG4gICAgICB2YXIgayA9IE1hdGgubWF4KG4gPj0gMCA/IG4gOiBsZW4gLSBNYXRoLmFicyhuKSwgMCk7XG5cbiAgICAgIC8vIDcuIFJlcGVhdCwgd2hpbGUgayA8IGxlblxuICAgICAgd2hpbGUgKGsgPCBsZW4pIHtcbiAgICAgICAgLy8gYS4gTGV0IGVsZW1lbnRLIGJlIHRoZSByZXN1bHQgb2YgPyBHZXQoTywgISBUb1N0cmluZyhrKSkuXG4gICAgICAgIC8vIGIuIElmIFNhbWVWYWx1ZVplcm8oc2VhcmNoRWxlbWVudCwgZWxlbWVudEspIGlzIHRydWUsIHJldHVybiB0cnVlLlxuICAgICAgICAvLyBjLiBJbmNyZWFzZSBrIGJ5IDEuXG4gICAgICAgIC8vIE5PVEU6ID09PSBwcm92aWRlcyB0aGUgY29ycmVjdCBcIlNhbWVWYWx1ZVplcm9cIiBjb21wYXJpc29uIG5lZWRlZCBoZXJlLlxuICAgICAgICBpZiAob1trXSA9PT0gc2VhcmNoRWxlbWVudCkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGsrKztcbiAgICAgIH1cblxuICAgICAgLy8gOC4gUmV0dXJuIGZhbHNlXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9KTtcbn1cbi8qIGVzbGludC1lbmFibGUgKi9cblxuKGZ1bmN0aW9uKCkge1xuXG4gIGZ1bmN0aW9uIHNldFN0b2NrKHJlc3VsdCkge1xuICAgIHZhciBlbWVyZ2VuY3lUcmlnZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVtZXJnZW5jeS10cmlnZ2VyJyk7XG4gICAgdmFyIGVsZW1lbnRUZW1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZWxlbWVudFRlbXAuaW5uZXJIVE1MID0gcmVzdWx0O1xuICAgIC8vIGVtZXJnZW5jeVRyaWdnZXIuYXBwZW5kQ2hpbGQoZWxlbWVudFRlbXAuZmlyc3RDaGlsZCk7XG4gICAgZW1lcmdlbmN5VHJpZ2dlci5pbm5lckhUTUwgPSByZXN1bHQ7XG4gICAgaWYgKGVtZXJnZW5jeVRyaWdnZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRlJykpIHtcbiAgICAgIGVtZXJnZW5jeVRyaWdnZXIuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpO1xuICAgIH1cbiAgICAvLyBjaGFuZ2UgZWxlbWVudCBjb2xvciBhbmQgcmVtb3ZlIHRyaWdnZXItcmVtb3ZlLXByb2RcbiAgICBpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hbHRlcmVkLWNvbG9yXScpKSB7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hbHRlcmVkLWNvbG9yXScpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZS1zZW5zZS1pY29uJyk7XG4gICAgfVxuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudHJpZ2dlci1yZW1vdmUtcHJvZCcpICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50cmlnZ2VyLXJlbW92ZS1wcm9kJykgIT09IG51bGwpIHtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50cmlnZ2VyLXJlbW92ZS1wcm9kJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9XG4gICAgLy8gbW92ZSB0b29sdGlwIGZvciBuZXcgZGl2IGlmIHNlbnNlIG9mIHVyZ2VuY3kgZXhpc3Rpc1xuICAgIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ta3RwbGFjZXRvb2x0aXAnKSAmJiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWt0cGxhY2V0b29sdGlwJykgIT09IG51bGwpe1xuICAgICAgdmFyIGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1rdHBsYWNldG9vbHRpcCcpO1xuICAgICAgZWwuc3R5bGUubWFyZ2luTGVmdCA9ICc0cHgnO1xuICAgICAgZWwuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgdmFyIGlucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9kdWN0LXNlbGxlci1uYW1lJyk7XG4gICAgICBpZihpbnMpIHtcbiAgICAgICAgaW5zLmluc2VydEJlZm9yZShlbCwgaW5zLm5leHRTaWJsaW5nKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzZXRDYWNoZVNlc3Npb25TdG9yYWdlKHNrdSkge1xuICAgIHZhciBlbWVyZ2VuY3lUcmlnZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVtZXJnZW5jeS10cmlnZ2VyJyk7XG4gICAgaWYgKCFlbWVyZ2VuY3lUcmlnZ2VyLmNsYXNzTGlzdC5jb250YWlucygnaGlkZScpKSB7XG4gICAgICBlbWVyZ2VuY3lUcmlnZ2VyLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcbiAgICB9XG4gICAgdmFyIHNrdVN0b3JhZ2UgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdlbWVyZ2VuY3ktdHJpZ2dlcicpO1xuICAgIGlmICghc2t1U3RvcmFnZSkge1xuICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnZW1lcmdlbmN5LXRyaWdnZXInLCBza3UpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGVtcFNrdVN0b3JhZ2UgPSBza3VTdG9yYWdlLnNwbGl0KCcsJyk7XG4gICAgdGVtcFNrdVN0b3JhZ2UucHVzaChza3UpO1xuICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ2VtZXJnZW5jeS10cmlnZ2VyJywgdGVtcFNrdVN0b3JhZ2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RW1lcmdlbmN5VGlnZ2VyKHNrdSwgc2VsbGVySWQpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgIG1ldGhvZDogJ2dldCcsXG4gICAgICB0eXBlOiAnaHRtbCcsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIHNrdTogc2t1LFxuICAgICAgICBzZWxsZXJJZDogc2VsbGVySWRcbiAgICAgIH0sXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgaWYgKHJlc3VsdCAhPT0gJ2ZhbHNlJykge1xuICAgICAgICAgIHNldFN0b2NrKHJlc3VsdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2V0Q2FjaGVTZXNzaW9uU3RvcmFnZShza3UpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ2VtZXJnZW5jeSB0cmlnZ2VyIGVycm9yOiAnLCBlcnJvcik7XG4gICAgICB9XG4gICAgfTtcbiAgICB3aW5kb3cuZnJlZWRvbS5yZXN0Q2xpZW50LnJlcXVlc3QoJy9zdG9jaycsIG9wdGlvbnMpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2hvd0VtZXJnZW5jeVRyaWdnZXIoZGF0YUVsZW1lbnQpIHtcbiAgICB2YXIgRU1FUkdFTkNZX1RSSUdHRVIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZW1lcmdlbmN5LXRyaWdnZXInKTtcbiAgICBpZiAoZGF0YUVsZW1lbnQpIHtcbiAgICAgIGlmIChFTUVSR0VOQ1lfVFJJR0dFUikge1xuICAgICAgICB2YXIgc2t1ID0gbnVsbDtcbiAgICAgICAgdmFyIHNlbGxlcklkID0gbnVsbDtcbiAgICAgICAgaWYgKGRhdGFFbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICBza3UgPSBkYXRhRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2t1Jyk7XG4gICAgICAgICAgc2VsbGVySWQgPSBkYXRhRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2VsbGVyaWQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBza3UgPSBkYXRhRWxlbWVudC5za3U7XG4gICAgICAgICAgc2VsbGVySWQgPSBkYXRhRWxlbWVudC5zZWxsZXJJZDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3RvcmFnZUVtZXJnZW5jeVRyaWdnZXIgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdlbWVyZ2VuY3ktdHJpZ2dlcicpO1xuICAgICAgICBpZiAoISFzdG9yYWdlRW1lcmdlbmN5VHJpZ2dlcikge1xuICAgICAgICAgIHZhciBzdG9yZWQgPSBzdG9yYWdlRW1lcmdlbmN5VHJpZ2dlci5zcGxpdCgnLCcpLmluY2x1ZGVzKHNrdSk7XG4gICAgICAgICAgaWYgKCFzdG9yZWQpIHtcbiAgICAgICAgICAgIGdldEVtZXJnZW5jeVRpZ2dlcihza3UsIHNlbGxlcklkKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCFFTUVSR0VOQ1lfVFJJR0dFUi5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGUnKSkge1xuICAgICAgICAgICAgICBFTUVSR0VOQ1lfVFJJR0dFUi5jbGFzc0xpc3QuYWRkKCdoaWRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGdldEVtZXJnZW5jeVRpZ2dlcihza3UsIHNlbGxlcklkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICAvL1ZlcmlmeSBzaXplIHVuaXF1ZVxuICB2YXIgdW5pcXVlU2l6ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9kdWN0X19zaXplLS1saXN0JykgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJvZHVjdF9fc2l6ZS0tbGlzdCBsaSBzcGFuJykgOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjYnV5LWJveCAucHJvZHVjdC1zaXplLXNlbGVjdG9yIC5za3Utc2VsZWN0IC5yYWRpby1vcHRpb25zIC5hY3RpdmUgYScpO1xuICBpZiAodW5pcXVlU2l6ZSAmJiB1bmlxdWVTaXplLmxlbmd0aCA9PT0gMSkge1xuICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1YignZW1lcmdlbmN5LXRyaWdnZXItc2hvdy1zdG9jaycsIHVuaXF1ZVNpemVbMF0pO1xuICB9XG5cbiAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIuc3ViKCdlbWVyZ2VuY3ktdHJpZ2dlci1zaG93LXN0b2NrJywgc2hvd0VtZXJnZW5jeVRyaWdnZXIpO1xufSgpKTtcbiJdfQ==
