"use strict";String.prototype.includes||(String.prototype.includes=function(e,t){if(e instanceof RegExp)throw TypeError("first argument must not be a RegExp");return void 0===t&&(t=0),this.indexOf(e,t)!==-1}),function(){function e(e,t){t=t||document;var o=t.querySelectorAll(e);return window.freedom.nodeListToArray(o)}function t(t){t||(t=e(F)),t.map(function(t){return e(_,t)}).map(function(e){return e.forEach(function(e){e.removeEventListener(H,f)})})}function o(){document.querySelectorAll(".buy-button-now")&&window.freedom.nsPubSub.pub("disabled.button.multiple",document.querySelectorAll(".buy-button-now"),!1)}function r(){var o=e(F);t(o),m(o)}function n(){L=document.cookie.includes("fshipEligible")}function i(){C=document.cookie.includes("zipcode")}function u(e){try{if(window.history&&window.history.pushState&&e.title){var t=document.querySelector("[data-sku-changed-target]").innerHTML;t=JSON.stringify(t),z++,history.pushState('{"content": '+t+', "page": '+z+"}",e.title,e.originalUrl)}}catch(o){console.error("Color-Flavor::setHistory::could not set history",o)}}function a(e){window.freedom.nsPubSub.pub("color-flavor-size.changeHtml.before");var t=document.createElement("div");T&&L&&C?t.appendChild(e):(t.innerHTML=e,t.querySelector(".freeDelivery-container")&&t.querySelector(".freeDelivery-container").classList.remove("hide")),document.querySelector(N).innerHTML=t.querySelector(N).innerHTML,window.freedom.nsPubSub.pub("color-flavor-size.changeHtml.after")}function d(){window.freedom.nsRequire.use("metadata",function(){window.freedom.metadata.chaordicPush(),window.freedom.metadata.gtmPush()})}function s(){document.querySelector(".price .starting-at")&&document.querySelector(".price .starting-at").classList.add("hide")}function l(e){window.freedom.nsPubSub.pub("Slider.reinitialize.all"),window.freedom.nsPubSub.pub("Youtube.video.load"),window.freedom.nsPubSub.pub("Zoom.restart"),window.freedom.nsPubSub.pub("Thumbs.restart",!1,!1),window.freedom.nsPubSub.pub("VideoPlayer.restart"),window.freedom.nsPubSub.pub("SlidePush.restart"),window.freedom.nsPubSub.pub("price.reload"),window.freedom.nsPubSub.pub("ShowOnScroll.reset"),window.freedom.nsPubSub.pub("sizeChart.restart"),window.freedom.nsPubSub.pub("installments.restart"),window.freedom.nsPubSub.pub("restrictValue.restart"),window.freedom.nsPubSub.pub("personalization.restart"),window.freedom.nsPubSub.pub("tellMe.restart"),window.freedom.nsPubSub.pub("spin.loading.animate.restart"),window.freedom.nsPubSub.pub("modal.restart"),window.freedom.nsPubSub.pub("LazyLoadingItems.update"),window.freedom.nsPubSub.pub("disabled.button.restart"),window.freedom.nsPubSub.pub("stripe.dfp.restart"),window.freedom.nsPubSub.pub("emergency-trigger-show-stock",e),document.querySelector(".wishlist .wishlist__heart")&&"pdp"===document.querySelector(".wishlist .wishlist__heart").getAttribute("data-template")&&(window.freedom.nsPubSub.pub("wishlist.checkFavoriteProducts"),window.freedom.nsPubSub.pub("wishlist.clickListener",!0)),document.querySelector("#quickview-container")||window.freedom.nsPubSub.pub("Shipping.restart"),window.freedom.nsPubSub.pub("abTestPrice.pdp.restart",e),window.freedom.nsPubSub.pub("ModelWear.restart"),window.freedom.nsPubSub.pub("SellerPreview.restart"),document.querySelector(".floating-button")&&window.freedom.nsPubSub.pub("FloatButton.restart"),window.freedom.nsPubSub.pub("description.anchorsBtn.restart"),x(),s(),o(),r()}function c(e,o,r){window.freedom.nsPubSub.pub("quickView.hasQuickView")?(t(),a(o),g(e),l(r)):(t(),a(o),g(e),d(),u(e),l(r))}function b(e){console.error("ColorFlavorSize::AjaxError:",e)}function w(e,t,r){var n={displayLoading:!0,method:"get",type:"html",error:function(e){v("hide",t),b(e)},success:function(o){v("hide",t),T&&L&&C?window.freedom.nsPubSub.pub("change.ColorFlavorSize.freeShipping",o,e,r):c(e,o,r)}};e.data&&(n.data=e.data),o(),v("show",t),P(),window.freedom.restClient.request(e.url,n)}function f(e){e.preventDefault();var t={},o=e.currentTarget,r=window.freedom.nsPubSub.pub("quickView.hasQuickView");o&&o.parentNode&&window.freedom.hasClass(o.parentNode,"active")||o&&window.freedom.hasClass(o,"ns-icon-check-mark")||(o&&o.parentNode&&o.parentNode.classList&&o.parentNode.classList.add&&(o.hasAttribute("data-size")||o.hasAttribute("data-voltage"))&&o.parentNode.classList.add("active"),t.data={},t.url="/refactoring"+o.getAttribute("href"),t.originalUrl=o.getAttribute("href"),t.title=o.getAttribute("data-title"),r&&(t.data.isQuickView=r),localStorage.getItem("sellerIdPdpCFS")&&(t.data.sellerId=localStorage.getItem("sellerIdPdpCFS")),window.freedom.nsPubSub.pub("quickView.hasQuickView"),w(t,o.closest("ul"),o))}function p(e){e.forEach(function(e){e.addEventListener(H,f)})}function m(t){t.forEach(function(t){p(e(_,t))})}function S(){var t=e("["+E+'="color"] '+I)[0],o=e("["+E+'="flavor"] '+I)[0],r=e("["+E+'="size"] '+I)[0],n={};return t&&(n.color={sku:t.getAttribute("data-sku"),title:t.getAttribute("data-title"),label:t.getAttribute("data-label"),available:!t.hasAttribute("data-color-flavor-unavailable")}),o&&(n.flavor={code:o.getAttribute("data-sku"),title:o.getAttribute("data-title"),label:o.getAttribute("data-label"),available:!o.hasAttribute("data-color-flavor-unavailable")}),r&&(n.size={code:r.getAttribute("data-sku"),title:r.getAttribute("data-title"),label:r.getAttribute("data-label"),available:!r.hasAttribute("data-color-flavor-unavailable")}),n}function g(){if(A.size){var t='[data-label="'+A.size.getAttribute("data-label")+'"]',o=e(t)[0];o&&o&&o.parentNode&&o.parentNode.classList&&o.parentNode.classList.add&&o.parentNode.classList.add("active")}}function h(){var t,o,r=e("["+E+'="size"] '+I),n=A.size,i=n?n.getAttribute("data-label"):null;return r.length>1?r.forEach(function(e){var r=e.getAttribute("data-label")?e.getAttribute("data-label"):null;r===i||t||(o=e,t=!0)}):o=r[0],o}function v(e,t){window.freedom.nsPubSub.pub("spin.loading.animate",t,e)}function P(){A.color=e("["+E+'="color"] '+I)[0],A.flavor=e("["+E+'="flavor"] '+I)[0],A.size=h()}function y(e){if(e){var t=S();e(t.size?t.size.code:void 0)}}function k(e){var t=window.location.href.split("#").length>1;t||(e||history.back(),Object.keys(e).length&&(e=JSON.parse(e),e.content&&""!==e.content&&(document.querySelector("[data-sku-changed-target]").innerHTML=e.content,r(),l())))}function q(){var e=document.referrer,t=/lojista/g.test(e)||/busca\?sellers=/g.test(e);if(t){var o=document.location.search.replace("?sellerId=","");localStorage.setItem("sellerIdPdpCFS",o)}else localStorage.removeItem("sellerIdPdpCFS")}var A={},z=0,L=document.cookie.includes("fshipEligible"),C=document.cookie.includes("zipcode"),T=document.querySelector("section[data-free-shipping-by-zipcode]"),E="data-color-flavor-size-content",F="["+E+"]",N="[data-sku-changed-target]",_="li a[data-sku]",I="li.active a",H="click",M=function(){try{var e=document.querySelector("#buy-button-now-buy-box");return(e=e&&e.getAttribute("data-seller"))?+e:(e=document.querySelector("[product-data-seller]"),e=e&&e.getAttribute("product-data-seller"),e?+e:0)}catch(t){return console.error("call-to-action.getSeller",t),0}},V=function(e,t,o){window&&window.freedom&&window.freedom.nsStorage&&window.freedom.nsStorage.set&&window.freedom.nsStorage.set(e,t,o)},O=function(){return window&&window.freedom&&window.freedom.nsStorage&&window.freedom.nsStorage.get?window.freedom.nsStorage.get("cp_sku")||[]:[]},x=function(){var e=document.querySelector("#buy-button-now");if(e){var t,o=O(),r=e.getAttribute("data-sku"),n=r.split("-");n.length&&(n[0]&&(t=n[0]),n[1]&&(t+="-"+n[1]),n[2]&&(t+="-"+n[2]));var i=document.querySelector("#stamp-coupon"),u=i&&i.getAttribute("data-discount"),a=document.querySelector("#stamp-coupon .text__stamp_coupon p"),d=o.find(function(e){return e.sku===r}),s=o.find(function(e){return e.skuFather===t});if(i&&s&&!d){var l=M().toString(),c={sku:r,skuFather:t,sellerId:l};o.push(c),V("cp_sku",o,1880)}i&&s?(window.freedom.addClass(i,"coupon-actived"),a.innerHTML=u+" de desconto aplicado"):i&&(window.freedom.removeClass(i,"coupon-actived"),a.innerHTML="Quero "+u+" de desconto aplicado"),window.WansTools&&(window.WansTools.ecProduct("detail"),window.WansTools.ecProduct("add")),window.freedom.addClass(i,"loaded")}return!1};!function(){m(e(F)),window.onpopstate=function(e){e&&k(e.state)},window.document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector("[data-sku-changed-target]").innerHTML;e&&(e=JSON.stringify(e),history.replaceState('{"content": '+e+', "page": '+z+"}",document.title,window.location.href))}),document.querySelector(".wishlist .wishlist__heart")&&"pdp"===document.querySelector(".wishlist .wishlist__heart").getAttribute("data-template")&&window.freedom.nsPubSub.pub("wishlist.checkFavoriteProducts"),document.querySelector("#quickview-container")||window.freedom.nsPubSub.pub("Shipping.restart"),T&&(window.freedom.nsPubSub.sub("returnCheckedFreeShipping",c),window.freedom.nsPubSub.sub("zipcodeCookie.reinit",i),window.freedom.nsPubSub.sub("shippingEligibleCookie.reinit",n)),window.freedom.nsPubSub.sub("ColorFlavorSize.select.size",y),window.freedom.nsPubSub.sub("ColorFlavorSize.restart",l),q()}()}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9yZWZhY3RvcmluZy9fY29tcG9uZW50cy9wcm9kdWN0L2NvbG9yLWZsYXZvci1zaXplL2Rlc2t0b3AvY29sb3ItZmxhdm9yLXNpemUubWluLmpzIl0sIm5hbWVzIjpbIlN0cmluZyIsInByb3RvdHlwZSIsImluY2x1ZGVzIiwic2VhcmNoIiwic3RhcnQiLCJSZWdFeHAiLCJUeXBlRXJyb3IiLCJ1bmRlZmluZWQiLCJ0aGlzIiwiaW5kZXhPZiIsImdldEFycmF5RnJvbURvbSIsInF1ZXJ5IiwiY29udGV4dCIsImRvY3VtZW50IiwiY29udGVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwid2luZG93IiwiZnJlZWRvbSIsIm5vZGVMaXN0VG9BcnJheSIsInJlbW92ZUV2ZW50cyIsIkNPTE9SX0ZMQVZPUl9TSVpFX0NPTlRFTlRfUVVFUlkiLCJtYXAiLCJjb250ZW50IiwiQ09MT1JfRkxBVk9SX1NJWkVfT1BUSU9OX0VMRU1FTlRfUVVFUlkiLCJlbGVtZW50cyIsImZvckVhY2giLCJlbGVtZW50IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIkVWRU5UX05BTUUiLCJvcHRpb25DbGlja0hhbmRsZXIiLCJoaWRlTG9hZGluZ0J1eUJ1dHRvbiIsIm5zUHViU3ViIiwicHViIiwicmVpbml0IiwiaW5pdCIsInJlaW5pdEhhc0VsaWdpYmxlQ29va2llIiwiaGFzRWxpZ2libGVDb29raWUiLCJjb29raWUiLCJyZWluaXRIYXNaaXBDb2RlQ29va2llIiwiaGFzWmlwQ29kZUNvb2tpZSIsInNldEhpc3RvcnkiLCJwcm9wZXJ0aWVzIiwiaGlzdG9yeSIsInB1c2hTdGF0ZSIsInRpdGxlIiwicXVlcnlTZWxlY3RvciIsImlubmVySFRNTCIsIkpTT04iLCJzdHJpbmdpZnkiLCJjb3VudFN0YXRlIiwib3JpZ2luYWxVcmwiLCJlIiwiY29uc29sZSIsImVycm9yIiwiY2hhbmdlVGFyZ2V0SHRtbENvbnRlbnQiLCJyZXNwb25zZSIsInRlbXAiLCJjcmVhdGVFbGVtZW50IiwiY2hlY2tGcmVlU2hpcHBpbmdFbmFibGVkIiwiYXBwZW5kQ2hpbGQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJDT0xPUl9GTEFWT1JfU0laRV9TS1VfVEFSR0VUIiwibWV0YWRhdGEiLCJuc1JlcXVpcmUiLCJ1c2UiLCJjaGFvcmRpY1B1c2giLCJndG1QdXNoIiwiaGlkZVN0YXJ0aW5nQXQiLCJhZGQiLCJjb21wb25lbnRzUmVpbml0IiwiZ2V0QXR0cmlidXRlIiwiY291cG9uQ2hlY2tlZCIsInJlcXVlc3RTdWNjZXNzSGFuZGxlciIsInJlc3RvcmVTZWxlY3RlZE9wdGlvbnMiLCJoYW5kbGVFcnJvciIsIm1ha2VSZXF1ZXN0IiwidGFyZ2V0Iiwib3B0aW9ucyIsImRpc3BsYXlMb2FkaW5nIiwibWV0aG9kIiwidHlwZSIsInRvZ2dsZUxvYWRpbmciLCJzdWNjZXNzIiwiZGF0YSIsInB1YlN1YkJlZm9yZUFqYXgiLCJyZXN0Q2xpZW50IiwicmVxdWVzdCIsInVybCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJjdXJyZW50VGFyZ2V0IiwiaXNRdWlja1ZpZXciLCJwYXJlbnROb2RlIiwiaGFzQ2xhc3MiLCJoYXNBdHRyaWJ1dGUiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwic2VsbGVySWQiLCJjbG9zZXN0IiwiYWRkRXZlbnRzIiwiYW5jaG9ycyIsImFuY2hvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJjb250ZW50TGlzdCIsImdldFNlbGVjdGVkT3B0aW9ucyIsImNvbG9yRWxlbWVudCIsIkNPTE9SX0ZMQVZPUl9TSVpFX0NPTlRFTlQiLCJBQ1RJVkVfT1BUSU9OX1FVRVJZIiwiZmxhdm9yRWxlbWVudCIsInNpemVFbGVtZW50Iiwic2VsZWN0ZWRPcHRpb25zIiwiY29sb3IiLCJza3UiLCJsYWJlbCIsImF2YWlsYWJsZSIsImZsYXZvciIsImNvZGUiLCJzaXplIiwiY2FjaGUiLCJjaGVja0NhY2hlZFNpemUiLCJjaGVja2VkU2VsZWN0ZWQiLCJjYWNoZWQiLCJzaXplcyIsIm9sZFNpemUiLCJvbGRTaXplQXR0ciIsImxlbmd0aCIsInNpemVBdHRyIiwiYWN0aW9uIiwicHViU3ViR2V0U2VsZWN0ZWRPcHRpb25zIiwiY2FsbGJhY2siLCJ1cGRhdGVDb250ZW50Iiwic3RhdGUiLCJnb1RvTG9jYXRpb24iLCJsb2NhdGlvbiIsImhyZWYiLCJzcGxpdCIsImJhY2siLCJPYmplY3QiLCJrZXlzIiwicGFyc2UiLCJzZXRTZWxsZXJJZFZhbHVlIiwicmVmZXJyZXIiLCJyZWZlcnJlcklzU2VsbGVyUGFnZSIsInRlc3QiLCJyZXBsYWNlIiwic2V0SXRlbSIsInJlbW92ZUl0ZW0iLCJnZXRTZWxsZXIiLCJzZWxsZXIiLCJzZXRMb2NhbFN0b3JhZ2UiLCJuYW1lIiwidGltZSIsIm5zU3RvcmFnZSIsInNldCIsImdldFNrdXMiLCJnZXQiLCJza3VGYXRoZXIiLCJza3VzIiwic2t1RmF0aGVyRnVsbCIsInN0YW1wUGRwIiwiZGlzY291bnQiLCJ0ZXh0Q291cG9uUGRwIiwiZmluZFNrdSIsImZpbmQiLCJmaW5kU2t1RmF0aGVyIiwidG9TdHJpbmciLCJwcm9kdWN0IiwicHVzaCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJXYW5zVG9vbHMiLCJlY1Byb2R1Y3QiLCJvbnBvcHN0YXRlIiwicmVwbGFjZVN0YXRlIiwic3ViIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUdLQSxRQUFPQyxVQUFVQyxXQUNwQkYsT0FBT0MsVUFBVUMsU0FBVyxTQUFTQyxFQUFRQyxHQUczQyxHQUFJRCxZQUFrQkUsUUFDcEIsS0FBTUMsV0FBVSxzQ0FHbEIsT0FEY0MsVUFBVkgsSUFBdUJBLEVBQVEsR0FDNUJJLEtBQUtDLFFBQVFOLEVBQVFDLFVBSy9CLFdBaUJDLFFBQVNNLEdBQWdCQyxFQUFPQyxHQUM5QkEsRUFBVUEsR0FBV0MsUUFDckIsSUFBSUMsR0FBV0YsRUFBUUcsaUJBQWlCSixFQUN4QyxPQUFPSyxRQUFPQyxRQUFRQyxnQkFBZ0JKLEdBdUZ4QyxRQUFTSyxHQUFhTCxHQUNmQSxJQUNIQSxFQUFXSixFQUFnQlUsSUFFN0JOLEVBQVNPLElB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aEMsU0FBU2dDLGNBQWMsOEJBQThCMEIsYUFBYSxrQkFDNUh2RCxPQUFPQyxRQUFRYyxTQUFTQyxJQUFJLGtDQUd6Qm5CLFNBQVNnQyxjQUFjLHlCQUMxQjdCLE9BQU9DLFFBQVFjLFNBQVNDLElBQUksb0JBRzFCMEIsSUFDRjFDLE9BQU9DLFFBQVFjLFNBQVNnSixJQUFJLDRCQUE2QnRHLEdBQ3pEekQsT0FBT0MsUUFBUWMsU0FBU2dKLElBQUksdUJBQXdCekksR0FDcER0QixPQUFPQyxRQUFRYyxTQUFTZ0osSUFBSSxnQ0FBaUM1SSxJQUkvRG5CLE9BQU9DLFFBQVFjLFNBQVNnSixJQUFJLDhCQUErQjlDLEdBQzNEakgsT0FBT0MsUUFBUWMsU0FBU2dKLElBQUksMEJBQTJCekcsR0FHdkR1RSIsImZpbGUiOiJfcmVmYWN0b3JpbmcvX2NvbXBvbmVudHMvcHJvZHVjdC9jb2xvci1mbGF2b3Itc2l6ZS9kZXNrdG9wL2NvbG9yLWZsYXZvci1zaXplLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuLyogZXNsaW50LWRpc2FibGUgKi9cbmlmICghU3RyaW5nLnByb3RvdHlwZS5pbmNsdWRlcykge1xuICBTdHJpbmcucHJvdG90eXBlLmluY2x1ZGVzID0gZnVuY3Rpb24oc2VhcmNoLCBzdGFydCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGlmIChzZWFyY2ggaW5zdGFuY2VvZiBSZWdFeHApIHtcbiAgICAgIHRocm93IFR5cGVFcnJvcignZmlyc3QgYXJndW1lbnQgbXVzdCBub3QgYmUgYSBSZWdFeHAnKTtcbiAgICB9XG4gICAgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQpIHsgc3RhcnQgPSAwOyB9XG4gICAgcmV0dXJuIHRoaXMuaW5kZXhPZihzZWFyY2gsIHN0YXJ0KSAhPT0gLTE7XG4gIH07XG59XG4vKiBlc2xpbnQtZW5hYmxlICovXG5cbihmdW5jdGlvbiAoKSB7XG4gIHZhciBjYWNoZSA9IHt9O1xuICB2YXIgY291bnRTdGF0ZSA9IDAsXG4gICAgaGFzRWxpZ2libGVDb29raWUgPSBkb2N1bWVudC5jb29raWUuaW5jbHVkZXMoJ2ZzaGlwRWxpZ2libGUnKSxcbiAgICBoYXNaaXBDb2RlQ29va2llID0gZG9jdW1lbnQuY29va2llLmluY2x1ZGVzKCd6aXBjb2RlJyksXG4gICAgY2hlY2tGcmVlU2hpcHBpbmdFbmFibGVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc2VjdGlvbltkYXRhLWZyZWUtc2hpcHBpbmctYnktemlwY29kZV0nKTtcbiAgdmFyIENPTE9SX0ZMQVZPUl9TSVpFX0NPTlRFTlQgPSAnZGF0YS1jb2xvci1mbGF2b3Itc2l6ZS1jb250ZW50JyxcbiAgICBDT0xPUl9GTEFWT1JfU0laRV9DT05URU5UX1FVRVJZID0gJ1snICsgQ09MT1JfRkxBVk9SX1NJWkVfQ09OVEVOVCArICddJyxcbiAgICBDT0xPUl9GTEFWT1JfU0laRV9TS1VfVEFSR0VUID0gJ1tkYXRhLXNrdS1jaGFuZ2VkLXRhcmdldF0nLFxuICAgIENPTE9SX0ZMQVZPUl9TSVpFX09QVElPTl9FTEVNRU5UX1FVRVJZID0gJ2xpIGFbZGF0YS1za3VdJyxcbiAgICBBQ1RJVkVfT1BUSU9OX1FVRVJZID0gJ2xpLmFjdGl2ZSBhJyxcbiAgICBFVkVOVF9OQU1FID0gJ2NsaWNrJztcblxuICAvKipcbiAgICogQXV4aWxpYXJ5IGZ1bmN0aW9uIHRvIGdldCBlbGVtZW50cyBmcm9tIERPTSB3aXRoIHF1ZXJ5U2VsZWN0b3JBbGwgYW5kIHJldHVybiB0aGlzIGxpc3QgYXMgQXJyYXlcbiAgICogQHJldHVybnMge0FycmF5fVxuICAgKi9cbiAgZnVuY3Rpb24gZ2V0QXJyYXlGcm9tRG9tKHF1ZXJ5LCBjb250ZXh0KSB7XG4gICAgY29udGV4dCA9IGNvbnRleHQgfHwgZG9jdW1lbnQ7XG4gICAgdmFyIGNvbnRlbnRzID0gY29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKHF1ZXJ5KTtcbiAgICByZXR1cm4gd2luZG93LmZyZWVkb20ubm9kZUxpc3RUb0FycmF5KGNvbnRlbnRzKTtcbiAgfVxuXG4gIHZhciBnZXRTZWxsZXIgPSBmdW5jdGlvbigpIHtcbiAgICB0cnkge1xuICAgICAgLy9oYXMgc2VsbGVyIG9uIHRoZSBidXR0b25cbiAgICAgIHZhciBzZWxsZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYnV5LWJ1dHRvbi1ub3ctYnV5LWJveCcpO1xuICAgICAgc2VsbGVyID0gc2VsbGVyICYmIHNlbGxlci5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2VsbGVyJyk7XG4gICAgICBpZihzZWxsZXIpIHJldHVybiArc2VsbGVyO1xuXG4gICAgICAvL2lmIGhhcyBubyBzZWxsZXIgb24gdGhlIGJ1dHRvblxuICAgICAgc2VsbGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW3Byb2R1Y3QtZGF0YS1zZWxsZXJdJyk7XG4gICAgICBzZWxsZXIgPSBzZWxsZXIgJiYgc2VsbGVyLmdldEF0dHJpYnV0ZSgncHJvZHVjdC1kYXRhLXNlbGxlcicpO1xuICAgICAgaWYoc2VsbGVyKSByZXR1cm4gK3NlbGxlcjtcblxuICAgICAgLy9kZWZhdWx0XG4gICAgICByZXR1cm4gMDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignY2FsbC10by1hY3Rpb24uZ2V0U2VsbGVyJywgZXJyb3IpO1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICB9O1xuXG4gIHZhciBzZXRMb2NhbFN0b3JhZ2UgPSBmdW5jdGlvbihuYW1lLCBkYXRhLCB0aW1lKSB7XG4gICAgaWYgKHdpbmRvdyAmJiB3aW5kb3cuZnJlZWRvbSAmJiB3aW5kb3cuZnJlZWRvbS5uc1N0b3JhZ2UgJiYgd2luZG93LmZyZWVkb20ubnNTdG9yYWdlLnNldCkge1xuICAgICAgd2luZG93LmZyZWVkb20ubnNTdG9yYWdlLnNldChuYW1lLCBkYXRhLCB0aW1lKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGdldFNrdXMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gd2luZG93ICYmIHdpbmRvdy5mcmVlZG9tICYmIHdpbmRvdy5mcmVlZG9tLm5zU3RvcmFnZSAmJiB3aW5kb3cuZnJlZWRvbS5uc1N0b3JhZ2UuZ2V0ID8gKHdpbmRvdy5mcmVlZG9tLm5zU3RvcmFnZS5nZXQoJ2NwX3NrdScpIHx8IFtdKSA6IFtdO1xuICB9O1xuXG4gIHZhciBjb3Vwb25DaGVja2VkID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYnV5LWJ1dHRvbi1ub3cnKTtcbiAgICBpZiAoZWxlbWVudCkge1xuICAgICAgdmFyIHNrdXMgPSBnZXRTa3VzKCk7XG4gICAgICB2YXIgc2t1ID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2t1Jyk7XG4gICAgICB2YXIgc2t1RmF0aGVyRnVsbCA9IHNrdS5zcGxpdCgnLScpO1xuICAgICAgdmFyIHNrdUZhdGhlcjtcblxuICAgICAgaWYgKHNrdUZhdGhlckZ1bGwubGVuZ3RoKSB7XG4gICAgICAgIGlmIChza3VGYXRoZXJGdWxsWzBdKSB7XG4gICAgICAgICAgc2t1RmF0aGVyID0gc2t1RmF0aGVyRnVsbFswXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChza3VGYXRoZXJGdWxsWzFdKSB7XG4gICAgICAgICAgc2t1RmF0aGVyICs9ICctJyArIHNrdUZhdGhlckZ1bGxbMV07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2t1RmF0aGVyRnVsbFsyXSkge1xuICAgICAgICAgIHNrdUZhdGhlciArPSAnLScgKyBza3VGYXRoZXJGdWxsWzJdO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBzdGFtcFBkcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzdGFtcC1jb3Vwb24nKTtcbiAgICAgIHZhciBkaXNjb3VudCA9IHN0YW1wUGRwICYmIHN0YW1wUGRwLmdldEF0dHJpYnV0ZSgnZGF0YS1kaXNjb3VudCcpO1xuICAgICAgdmFyIHRleHRDb3Vwb25QZHAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3RhbXAtY291cG9uIC50ZXh0X19zdGFtcF9jb3Vwb24gcCcpO1xuICAgICAgdmFyIGZpbmRTa3UgPSBza3VzLmZpbmQoZnVuY3Rpb24oZSkgeyByZXR1cm4gZS5za3UgPT09IHNrdTsgfSk7XG4gICAgICB2YXIgZmluZFNrdUZhdGhlciA9IHNrdXMuZmluZChmdW5jdGlvbihlKSB7IHJldHVybiBlLnNrdUZhdGhlciA9PT0gc2t1RmF0aGVyOyB9KTtcblxuICAgICAgaWYgKHN0YW1wUGRwICYmIGZpbmRTa3VGYXRoZXIgJiYgIWZpbmRTa3UpIHtcbiAgICAgICAgdmFyIHNlbGxlcklkID0gZ2V0U2VsbGVyKCkudG9TdHJpbmcoKTtcbiAgICAgICAgdmFyIHByb2R1Y3QgPSB7IHNrdTogc2t1LCBza3VGYXRoZXI6IHNrdUZhdGhlciwgc2VsbGVySWQ6IHNlbGxlcklkIH07XG4gICAgICAgIHNrdXMucHVzaChwcm9kdWN0KTtcbiAgICAgICAgc2V0TG9jYWxTdG9yYWdlKCdjcF9za3UnLCBza3VzLCAxODgwKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0YW1wUGRwICYmIGZpbmRTa3VGYXRoZXIpIHtcbiAgICAgICAgd2luZG93LmZyZWVkb20uYWRkQ2xhc3Moc3RhbXBQZHAsICdjb3Vwb24tYWN0aXZlZCcpO1xuICAgICAgICB0ZXh0Q291cG9uUGRwLmlubmVySFRNTCA9IGRpc2NvdW50ICsgJyBkZSBkZXNjb250byBhcGxpY2Fkbyc7XG4gICAgICB9IGVsc2UgaWYgKHN0YW1wUGRwKSB7XG4gICAgICAgIHdpbmRvdy5mcmVlZG9tLnJlbW92ZUNsYXNzKHN0YW1wUGRwLCAnY291cG9uLWFjdGl2ZWQnKTtcbiAgICAgICAgdGV4dENvdXBvblBkcC5pbm5lckhUTUwgPSAnUXVlcm8gJyArIGRpc2NvdW50ICsgJyBkZSBkZXNjb250byBhcGxpY2Fkbyc7XG4gICAgICB9XG5cbiAgICAgIGlmICh3aW5kb3cuV2Fuc1Rvb2xzKSB7XG4gICAgICAgIHdpbmRvdy5XYW5zVG9vbHMuZWNQcm9kdWN0KCdkZXRhaWwnKTtcbiAgICAgICAgd2luZG93LldhbnNUb29scy5lY1Byb2R1Y3QoJ2FkZCcpO1xuICAgICAgfVxuICAgICAgd2luZG93LmZyZWVkb20uYWRkQ2xhc3Moc3RhbXBQZHAsICdsb2FkZWQnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgLy8gL1JFU0VUIE1FVEhPRFNcbiAgZnVuY3Rpb24gcmVtb3ZlRXZlbnRzKGNvbnRlbnRzKSB7XG4gICAgaWYgKCFjb250ZW50cykge1xuICAgICAgY29udGVudHMgPSBnZXRBcnJheUZyb21Eb20oQ09MT1JfRkxBVk9SX1NJWkVfQ09OVEVOVF9RVUVSWSk7XG4gICAgfVxuICAgIGNvbnRlbnRzLm1hcChmdW5jdGlvbiAoY29udGVudCkge1xuICAgICAgcmV0dXJuIGdldEFycmF5RnJvbURvbShDT0xPUl9GTEFWT1JfU0laRV9PUFRJT05fRUxFTUVOVF9RVUVSWSwgY29udGVudCk7XG4gICAgfSkubWFwKGZ1bmN0aW9uIChlbGVtZW50cykge1xuICAgICAgcmV0dXJuIGVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKEVWRU5UX05BTUUsIG9wdGlvbkNsaWNrSGFuZGxlcik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhpZGVMb2FkaW5nQnV5QnV0dG9uKCkge1xuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnV5LWJ1dHRvbi1ub3cnKSkge1xuICAgICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIucHViKCdkaXNhYmxlZC5idXR0b24ubXVsdGlwbGUnLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnV5LWJ1dHRvbi1ub3cnKSwgZmFsc2UpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlaW5pdCgpIHtcbiAgICB2YXIgY29udGVudHMgPSBnZXRBcnJheUZyb21Eb20oQ09MT1JfRkxBVk9SX1NJWkVfQ09OVEVOVF9RVUVSWSk7XG4gICAgcmVtb3ZlRXZlbnRzKGNvbnRlbnRzKTtcbiAgICBpbml0KGNvbnRlbnRzKTtcbiAgfVxuICAvLyAvUkVTRVQgTUVUSE9EU1xuXG4gIC8qKlxuICogQG1ldGhvZCByZWluaXRoYXNFbGlnaWJsZUNvb2tpZSBjaGFuZ2VDb2xvciBjaGFuZ2VGbGF2b3JcbiAqIEVhY2ggZnVuY3Rpb25zIHdhdGNoIHJlc3BlY3RpdmUgY2hhbmdlcyBvZiBjb2xvciwgZmxhdm9yIGFuZCBzaXplXG4gKiBAcGFyYW0gIHt9XG4gKi9cbiAgZnVuY3Rpb24gcmVpbml0SGFzRWxpZ2libGVDb29raWUoKSB7XG4gICAgaGFzRWxpZ2libGVDb29raWUgPSBkb2N1bWVudC5jb29raWUuaW5jbHVkZXMoJ2ZzaGlwRWxpZ2libGUnKTtcbiAgfVxuXG4gIC8qKlxuICogQG1ldGhvZCByZWluaXRoYXNaaXBDb2RlQ29va2llIGNoYW5nZUNvbG9yIGNoYW5nZUZsYXZvclxuICogRWFjaCBmdW5jdGlvbnMgd2F0Y2ggcmVzcGVjdGl2ZSBjaGFuZ2VzIG9mIGNvbG9yLCBmbGF2b3IgYW5kIHNpemVcbiAqIEBwYXJhbSAge31cbiAqL1xuICBmdW5jdGlvbiByZWluaXRIYXNaaXBDb2RlQ29va2llKCkge1xuICAgIGhhc1ppcENvZGVDb29raWUgPSBkb2N1bWVudC5jb29raWUuaW5jbHVkZXMoJ3ppcGNvZGUnKTtcbiAgfVxuXG4gIC8vIFNURVBTIFRPIFJFU0VUIFRIRSBQQUdFIFdIRU4gQSBTVUNDRVNTRlVMIFJFUVVFU1QgSVMgTUFERVxuICBmdW5jdGlvbiBzZXRIaXN0b3J5KHByb3BlcnRpZXMpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKHdpbmRvdy5oaXN0b3J5ICYmXG4gICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSAmJlxuICAgICAgICBwcm9wZXJ0aWVzLnRpdGxlKSB7XG4gICAgICAgIHZhciBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtc2t1LWNoYW5nZWQtdGFyZ2V0XScpLmlubmVySFRNTDtcbiAgICAgICAgY29udGVudCA9IEpTT04uc3RyaW5naWZ5KGNvbnRlbnQpO1xuICAgICAgICBjb3VudFN0YXRlKys7XG4gICAgICAgIGhpc3RvcnkucHVzaFN0YXRlKFxuICAgICAgICAgICd7XCJjb250ZW50XCI6ICcgKyBjb250ZW50ICsgJywgXCJwYWdlXCI6ICcgKyBjb3VudFN0YXRlICsgJ30nLFxuICAgICAgICAgIHByb3BlcnRpZXMudGl0bGUsXG4gICAgICAgICAgcHJvcGVydGllcy5vcmlnaW5hbFVybFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0NvbG9yLUZsYXZvcjo6c2V0SGlzdG9yeTo6Y291bGQgbm90IHNldCBoaXN0b3J5JywgZSk7XG4gICAgfVxuXG4gIH1cblxuICAvLyBBY3R1YWxseSBjaGFuZ2VzIHRoZSBTSE9XQ0FTRSB0ZW1wbGF0ZVxuICBmdW5jdGlvbiBjaGFuZ2VUYXJnZXRIdG1sQ29udGVudChyZXNwb25zZSkge1xuICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1YignY29sb3ItZmxhdm9yLXNpemUuY2hhbmdlSHRtbC5iZWZvcmUnKTtcbiAgICB2YXIgdGVtcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgaWYgKGNoZWNrRnJlZVNoaXBwaW5nRW5hYmxlZCAmJiBoYXNFbGlnaWJsZUNvb2tpZSAmJiBoYXNaaXBDb2RlQ29va2llKSB7XG4gICAgICB0ZW1wLmFwcGVuZENoaWxkKHJlc3BvbnNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGVtcC5pbm5lckhUTUwgPSByZXNwb25zZTtcbiAgICAgIGlmICh0ZW1wLnF1ZXJ5U2VsZWN0b3IoJy5mcmVlRGVsaXZlcnktY29udGFpbmVyJykpIHRlbXAucXVlcnlTZWxlY3RvcignLmZyZWVEZWxpdmVyeS1jb250YWluZXInKS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJyk7XG4gICAgfVxuXG4gICAgLy9jaGFuZ2UgcGFnZSdzIEhUTUwgb2YgdGFyZ2V0IEFyZWFcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKENPTE9SX0ZMQVZPUl9TSVpFX1NLVV9UQVJHRVQpLmlubmVySFRNTCA9IHRlbXAucXVlcnlTZWxlY3RvcihDT0xPUl9GTEFWT1JfU0laRV9TS1VfVEFSR0VUKS5pbm5lckhUTUw7XG4gICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIucHViKCdjb2xvci1mbGF2b3Itc2l6ZS5jaGFuZ2VIdG1sLmFmdGVyJyk7XG4gIH1cblxuICBmdW5jdGlvbiBtZXRhZGF0YSgpIHtcbiAgICB3aW5kb3cuZnJlZWRvbS5uc1JlcXVpcmUudXNlKCdtZXRhZGF0YScsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHdpbmRvdy5mcmVlZG9tLm1ldGFkYXRhLmNoYW9yZGljUHVzaCgpO1xuICAgICAgd2luZG93LmZyZWVkb20ubWV0YWRhdGEuZ3RtUHVzaCgpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gaGlkZVN0YXJ0aW5nQXQoKSB7XG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmljZSAuc3RhcnRpbmctYXQnKSkge1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByaWNlIC5zdGFydGluZy1hdCcpLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcbiAgICB9XG4gIH1cblxuICAvLyBDYWxsIHRvIG91dHNpZGVycyB0aHJvdWdoIHB1YnN1YjtcbiAgZnVuY3Rpb24gY29tcG9uZW50c1JlaW5pdChlbGVtZW50KSB7XG4gICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIucHViKCdTbGlkZXIucmVpbml0aWFsaXplLmFsbCcpO1xuICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1YignWW91dHViZS52aWRlby5sb2FkJyk7XG4gICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIucHViKCdab29tLnJlc3RhcnQnKTtcbiAgICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5wdWIoJ1RodW1icy5yZXN0YXJ0JywgZmFsc2UsIGZhbHNlKTtcbiAgICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5wdWIoJ1ZpZGVvUGxheWVyLnJlc3RhcnQnKTtcbiAgICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5wdWIoJ1NsaWRlUHVzaC5yZXN0YXJ0Jyk7XG4gICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIucHViKCdwcmljZS5yZWxvYWQnKTtcbiAgICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5wdWIoJ1Nob3dPblNjcm9sbC5yZXNldCcpO1xuICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1Yignc2l6ZUNoYXJ0LnJlc3RhcnQnKTtcbiAgICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5wdWIoJ2luc3RhbGxtZW50cy5yZXN0YXJ0Jyk7XG4gICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIucHViKCdyZXN0cmljdFZhbHVlLnJlc3RhcnQnKTtcbiAgICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5wdWIoJ3BlcnNvbmFsaXphdGlvbi5yZXN0YXJ0Jyk7XG4gICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIucHViKCd0ZWxsTWUucmVzdGFydCcpO1xuICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1Yignc3Bpbi5sb2FkaW5nLmFuaW1hdGUucmVzdGFydCcpO1xuICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1YignbW9kYWwucmVzdGFydCcpO1xuICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1YignTGF6eUxvYWRpbmdJdGVtcy51cGRhdGUnKTtcbiAgICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5wdWIoJ2Rpc2FibGVkLmJ1dHRvbi5yZXN0YXJ0Jyk7XG4gICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIucHViKCdzdHJpcGUuZGZwLnJlc3RhcnQnKTtcbiAgICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5wdWIoJ2VtZXJnZW5jeS10cmlnZ2VyLXNob3ctc3RvY2snLCBlbGVtZW50KTtcbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndpc2hsaXN0IC53aXNobGlzdF9faGVhcnQnKSAmJiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2lzaGxpc3QgLndpc2hsaXN0X19oZWFydCcpLmdldEF0dHJpYnV0ZSgnZGF0YS10ZW1wbGF0ZScpID09PSAncGRwJykge1xuICAgICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIucHViKCd3aXNobGlzdC5jaGVja0Zhdm9yaXRlUHJvZHVjdHMnKTtcbiAgICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1Yignd2lzaGxpc3QuY2xpY2tMaXN0ZW5lcicsIHRydWUpO1xuICAgIH1cbiAgICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNxdWlja3ZpZXctY29udGFpbmVyJykpIHtcbiAgICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1YignU2hpcHBpbmcucmVzdGFydCcpO1xuICAgIH1cbiAgICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5wdWIoJ2FiVGVzdFByaWNlLnBkcC5yZXN0YXJ0JywgZWxlbWVudCk7XG4gICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIucHViKCdNb2RlbFdlYXIucmVzdGFydCcpO1xuICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1YignU2VsbGVyUHJldmlldy5yZXN0YXJ0Jyk7XG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mbG9hdGluZy1idXR0b24nKSkge1xuICAgICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIucHViKCdGbG9hdEJ1dHRvbi5yZXN0YXJ0Jyk7XG4gICAgfVxuICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1YignZGVzY3JpcHRpb24uYW5jaG9yc0J0bi5yZXN0YXJ0Jyk7XG4gICAgY291cG9uQ2hlY2tlZCgpO1xuICAgIGhpZGVTdGFydGluZ0F0KCk7XG4gICAgaGlkZUxvYWRpbmdCdXlCdXR0b24oKTtcbiAgICByZWluaXQoKTtcbiAgfVxuXG4gIC8vIC9TVEVQUyBUTyBSRVNFVCBUSEUgUEFHRSBXSEVOIEEgU1VDQ0VTU0ZVTCBSRVFVRVNUIElTIE1BREVcblxuICAvLyBSRVFVRVNUIEFORCBIQU5ETEVSU1xuICBmdW5jdGlvbiByZXF1ZXN0U3VjY2Vzc0hhbmRsZXIocHJvcGVydGllcywgcmVzcG9uc2UsIGVsZW1lbnQpIHtcbiAgICBpZiAod2luZG93LmZyZWVkb20ubnNQdWJTdWIucHViKCdxdWlja1ZpZXcuaGFzUXVpY2tWaWV3JykpIHtcbiAgICAgIHJlbW92ZUV2ZW50cygpO1xuICAgICAgY2hhbmdlVGFyZ2V0SHRtbENvbnRlbnQocmVzcG9uc2UpO1xuICAgICAgcmVzdG9yZVNlbGVjdGVkT3B0aW9ucyhwcm9wZXJ0aWVzKTtcbiAgICAgIGNvbXBvbmVudHNSZWluaXQoZWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbW92ZUV2ZW50cygpO1xuICAgICAgY2hhbmdlVGFyZ2V0SHRtbENvbnRlbnQocmVzcG9uc2UpO1xuICAgICAgcmVzdG9yZVNlbGVjdGVkT3B0aW9ucyhwcm9wZXJ0aWVzKTtcbiAgICAgIG1ldGFkYXRhKCk7XG4gICAgICBzZXRIaXN0b3J5KHByb3BlcnRpZXMpO1xuICAgICAgY29tcG9uZW50c1JlaW5pdChlbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVFcnJvcihlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0NvbG9yRmxhdm9yU2l6ZTo6QWpheEVycm9yOicsIGVycm9yKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1ha2VSZXF1ZXN0KHByb3BlcnRpZXMsIHRhcmdldCwgZWxlbWVudCkge1xuICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgZGlzcGxheUxvYWRpbmc6IHRydWUsXG4gICAgICBtZXRob2Q6ICdnZXQnLFxuICAgICAgdHlwZTogJ2h0bWwnLFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICB0b2dnbGVMb2FkaW5nKCdoaWRlJywgdGFyZ2V0KTtcbiAgICAgICAgaGFuZGxlRXJyb3IoZXJyb3IpO1xuICAgICAgfSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICB0b2dnbGVMb2FkaW5nKCdoaWRlJywgdGFyZ2V0KTtcbiAgICAgICAgaWYgKGNoZWNrRnJlZVNoaXBwaW5nRW5hYmxlZCAmJiBoYXNFbGlnaWJsZUNvb2tpZSAmJiBoYXNaaXBDb2RlQ29va2llKSB7XG4gICAgICAgICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIucHViKCdjaGFuZ2UuQ29sb3JGbGF2b3JTaXplLmZyZWVTaGlwcGluZycsIHJlc3BvbnNlLCBwcm9wZXJ0aWVzLCBlbGVtZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXF1ZXN0U3VjY2Vzc0hhbmRsZXIocHJvcGVydGllcywgcmVzcG9uc2UsIGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIGlmIChwcm9wZXJ0aWVzLmRhdGEpIHtcbiAgICAgIG9wdGlvbnMuZGF0YSA9IHByb3BlcnRpZXMuZGF0YTtcbiAgICB9XG4gICAgaGlkZUxvYWRpbmdCdXlCdXR0b24oKTtcbiAgICB0b2dnbGVMb2FkaW5nKCdzaG93JywgdGFyZ2V0KTtcbiAgICBwdWJTdWJCZWZvcmVBamF4KCk7XG4gICAgd2luZG93LmZyZWVkb20ucmVzdENsaWVudC5yZXF1ZXN0KHByb3BlcnRpZXMudXJsLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8vIC9SRVFVRVNUIEFORCBIQU5ETEVSU1xuXG4gIC8vIEhUTUwgRVZFTlQgSEFORExFUlNcbiAgZnVuY3Rpb24gb3B0aW9uQ2xpY2tIYW5kbGVyKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIHZhciBwcm9wZXJ0aWVzID0ge307XG4gICAgdmFyIGVsZW1lbnQgPSBldmVudC5jdXJyZW50VGFyZ2V0O1xuICAgIHZhciBpc1F1aWNrVmlldyA9IHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1YigncXVpY2tWaWV3Lmhhc1F1aWNrVmlldycpO1xuXG4gICAgLy8gaWYgaXQgaXMgYWxyZWFkeSBzZWxlY3RlZCBvbmUgb2YgdGhlc2UgY2xhc3NlcyB3aWxsIGJlIGFwcGxpZWQgdG8gdGhlIGVsZW1lbnRcbiAgICBpZiAoKGVsZW1lbnQgJiYgZWxlbWVudC5wYXJlbnROb2RlICYmIHdpbmRvdy5mcmVlZG9tLmhhc0NsYXNzKGVsZW1lbnQucGFyZW50Tm9kZSwgJ2FjdGl2ZScpKSB8fCAoZWxlbWVudCAmJiB3aW5kb3cuZnJlZWRvbS5oYXNDbGFzcyhlbGVtZW50LCAnbnMtaWNvbi1jaGVjay1tYXJrJykpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudC5wYXJlbnROb2RlICYmIGVsZW1lbnQucGFyZW50Tm9kZS5jbGFzc0xpc3QgJiYgZWxlbWVudC5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQgJiYgKGVsZW1lbnQuaGFzQXR0cmlidXRlKCdkYXRhLXNpemUnKSB8fCBlbGVtZW50Lmhhc0F0dHJpYnV0ZSgnZGF0YS12b2x0YWdlJykpKSB7XG4gICAgICBlbGVtZW50LnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgfVxuXG4gICAgLy9UT0RPOiByZW1vdmUgdGhpcyAnL3JlZmFjdG9yaW5nJyB0aGluZ1xuICAgIHByb3BlcnRpZXMuZGF0YSA9IHt9O1xuICAgIHByb3BlcnRpZXMudXJsID0gJy9yZWZhY3RvcmluZycgKyBlbGVtZW50LmdldEF0dHJpYnV0ZSgnaHJlZicpO1xuICAgIHByb3BlcnRpZXMub3JpZ2luYWxVcmwgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnaHJlZicpO1xuICAgIHByb3BlcnRpZXMudGl0bGUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScpO1xuICAgIGlmIChpc1F1aWNrVmlldykge1xuICAgICAgcHJvcGVydGllcy5kYXRhLmlzUXVpY2tWaWV3ID0gaXNRdWlja1ZpZXc7XG4gICAgfVxuXG4gICAgaWYobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3NlbGxlcklkUGRwQ0ZTJykpIHtcbiAgICAgIHByb3BlcnRpZXMuZGF0YS5zZWxsZXJJZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzZWxsZXJJZFBkcENGUycpO1xuICAgIH1cblxuICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1YigncXVpY2tWaWV3Lmhhc1F1aWNrVmlldycpO1xuICAgIG1ha2VSZXF1ZXN0KHByb3BlcnRpZXMsIGVsZW1lbnQuY2xvc2VzdCgndWwnKSwgZWxlbWVudCk7XG4gIH1cbiAgLy8gL0hUTUwgRVZFTlQgSEFORExFUlNcblxuICBmdW5jdGlvbiBhZGRFdmVudHMoYW5jaG9ycykge1xuICAgIGFuY2hvcnMuZm9yRWFjaChmdW5jdGlvbiAoYW5jaG9yKSB7XG4gICAgICBhbmNob3IuYWRkRXZlbnRMaXN0ZW5lcihFVkVOVF9OQU1FLCBvcHRpb25DbGlja0hhbmRsZXIpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdChjb250ZW50cykge1xuICAgIGNvbnRlbnRzLmZvckVhY2goZnVuY3Rpb24gKGNvbnRlbnRMaXN0KSB7XG4gICAgICBhZGRFdmVudHMoZ2V0QXJyYXlGcm9tRG9tKENPTE9SX0ZMQVZPUl9TSVpFX09QVElPTl9FTEVNRU5UX1FVRVJZLCBjb250ZW50TGlzdCkpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gUFVCU1VCIEVWRU5UIEhBTkRMRVJTXG5cbiAgLy8gQVVYSUxJQVJZXG4gIC8vIFRPRE86IGNoZWNrIGlmIGl0IGlzIHN0aWxsIHVzZWZ1bGwgYWZ0ZXIgQ2FsbC10by1hY3Rpb24gaW50ZWdyYXRpb25cbiAgZnVuY3Rpb24gZ2V0U2VsZWN0ZWRPcHRpb25zKCkge1xuICAgIHZhciBjb2xvckVsZW1lbnQgPSBnZXRBcnJheUZyb21Eb20oJ1snICsgQ09MT1JfRkxBVk9SX1NJWkVfQ09OVEVOVCArICc9XCJjb2xvclwiXSAnICsgQUNUSVZFX09QVElPTl9RVUVSWSlbMF07XG4gICAgdmFyIGZsYXZvckVsZW1lbnQgPSBnZXRBcnJheUZyb21Eb20oJ1snICsgQ09MT1JfRkxBVk9SX1NJWkVfQ09OVEVOVCArICc9XCJmbGF2b3JcIl0gJyArIEFDVElWRV9PUFRJT05fUVVFUlkpWzBdO1xuICAgIHZhciBzaXplRWxlbWVudCA9IGdldEFycmF5RnJvbURvbSgnWycgKyBDT0xPUl9GTEFWT1JfU0laRV9DT05URU5UICsgJz1cInNpemVcIl0gJyArIEFDVElWRV9PUFRJT05fUVVFUlkpWzBdO1xuXG4gICAgdmFyIHNlbGVjdGVkT3B0aW9ucyA9IHt9O1xuICAgIGlmIChjb2xvckVsZW1lbnQpIHtcbiAgICAgIHNlbGVjdGVkT3B0aW9ucy5jb2xvciA9IHtcbiAgICAgICAgc2t1OiBjb2xvckVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXNrdScpLFxuICAgICAgICB0aXRsZTogY29sb3JFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScpLFxuICAgICAgICBsYWJlbDogY29sb3JFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1sYWJlbCcpLFxuICAgICAgICBhdmFpbGFibGU6ICFjb2xvckVsZW1lbnQuaGFzQXR0cmlidXRlKCdkYXRhLWNvbG9yLWZsYXZvci11bmF2YWlsYWJsZScpXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoZmxhdm9yRWxlbWVudCkge1xuICAgICAgc2VsZWN0ZWRPcHRpb25zLmZsYXZvciA9IHtcbiAgICAgICAgY29kZTogZmxhdm9yRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2t1JyksXG4gICAgICAgIHRpdGxlOiBmbGF2b3JFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScpLFxuICAgICAgICBsYWJlbDogZmxhdm9yRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbGFiZWwnKSxcbiAgICAgICAgYXZhaWxhYmxlOiAhZmxhdm9yRWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2RhdGEtY29sb3ItZmxhdm9yLXVuYXZhaWxhYmxlJylcbiAgICAgIH07XG4gICAgfVxuICAgIGlmIChzaXplRWxlbWVudCkge1xuICAgICAgc2VsZWN0ZWRPcHRpb25zLnNpemUgPSB7XG4gICAgICAgIGNvZGU6IHNpemVFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1za3UnKSxcbiAgICAgICAgdGl0bGU6IHNpemVFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScpLFxuICAgICAgICBsYWJlbDogc2l6ZUVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWxhYmVsJyksXG4gICAgICAgIGF2YWlsYWJsZTogIXNpemVFbGVtZW50Lmhhc0F0dHJpYnV0ZSgnZGF0YS1jb2xvci1mbGF2b3ItdW5hdmFpbGFibGUnKVxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHNlbGVjdGVkT3B0aW9ucztcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc3RvcmVTZWxlY3RlZE9wdGlvbnMoKSB7XG4gICAgaWYgKCFjYWNoZS5zaXplKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHF1ZXJ5ID0gJ1tkYXRhLWxhYmVsPVwiJyArIGNhY2hlLnNpemUuZ2V0QXR0cmlidXRlKCdkYXRhLWxhYmVsJykgKyAnXCJdJztcbiAgICB2YXIgZWxlbWVudCA9IGdldEFycmF5RnJvbURvbShxdWVyeSlbMF07XG5cbiAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LnBhcmVudE5vZGUgJiYgZWxlbWVudC5wYXJlbnROb2RlLmNsYXNzTGlzdCAmJiBlbGVtZW50LnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCkge1xuICAgICAgZWxlbWVudC5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBbY2hlY2tDYWNoZWRTaXplXVxuICAgKiBjaGVjayBpZiBoYXMgYW4gb2xkIGNhY2hlZCBzaXplLCBhbmQgY29tcGFyZSB3aXRoIG90aGVyIHBvc3NpYmxlIHNpemVzIHRvIGdldCBjbGlja2VkIG9uZVxuICAgKiBAcmV0dXJuIHtET01FbGVtZW50fSBjYWNoZWQgW3NpemUgZWxlbWVudCB0byBjYWNoZV1cbiAgICovXG4gIGZ1bmN0aW9uIGNoZWNrQ2FjaGVkU2l6ZSgpIHtcbiAgICB2YXIgc2l6ZXMgPSBnZXRBcnJheUZyb21Eb20oJ1snICsgQ09MT1JfRkxBVk9SX1NJWkVfQ09OVEVOVCArICc9XCJzaXplXCJdICcgKyBBQ1RJVkVfT1BUSU9OX1FVRVJZKSxcbiAgICAgIG9sZFNpemUgPSBjYWNoZS5zaXplLFxuICAgICAgb2xkU2l6ZUF0dHIgPSBvbGRTaXplID8gb2xkU2l6ZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtbGFiZWwnKSA6IG51bGwsXG4gICAgICBjaGVja2VkU2VsZWN0ZWQsXG4gICAgICBjYWNoZWQ7XG4gICAgaWYgKHNpemVzLmxlbmd0aCA+IDEpIHtcbiAgICAgIHNpemVzLmZvckVhY2goZnVuY3Rpb24gKHNpemUpIHtcbiAgICAgICAgdmFyIHNpemVBdHRyID0gc2l6ZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtbGFiZWwnKSA/IHNpemUuZ2V0QXR0cmlidXRlKCdkYXRhLWxhYmVsJykgOiBudWxsO1xuICAgICAgICBpZiAoKHNpemVBdHRyICE9PSBvbGRTaXplQXR0cikgJiYgIWNoZWNrZWRTZWxlY3RlZCkge1xuICAgICAgICAgIGNhY2hlZCA9IHNpemU7XG4gICAgICAgICAgY2hlY2tlZFNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhY2hlZCA9IHNpemVzWzBdO1xuICAgIH1cblxuICAgIHJldHVybiBjYWNoZWQ7XG4gIH1cblxuICAvLyAvQVVYSUxJQVJZXG5cbiAgZnVuY3Rpb24gdG9nZ2xlTG9hZGluZyhhY3Rpb24sIGVsZW1lbnQpIHtcbiAgICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5wdWIoJ3NwaW4ubG9hZGluZy5hbmltYXRlJyxcbiAgICAgIGVsZW1lbnQsXG4gICAgICBhY3Rpb25cbiAgICApO1xuICB9XG5cbiAgLy9FVkVOVFNcbiAgZnVuY3Rpb24gcHViU3ViQmVmb3JlQWpheCgpIHtcbiAgICBjYWNoZS5jb2xvciA9IGdldEFycmF5RnJvbURvbSgnWycgKyBDT0xPUl9GTEFWT1JfU0laRV9DT05URU5UICsgJz1cImNvbG9yXCJdICcgKyBBQ1RJVkVfT1BUSU9OX1FVRVJZKVswXTtcbiAgICBjYWNoZS5mbGF2b3IgPSBnZXRBcnJheUZyb21Eb20oJ1snICsgQ09MT1JfRkxBVk9SX1NJWkVfQ09OVEVOVCArICc9XCJmbGF2b3JcIl0gJyArIEFDVElWRV9PUFRJT05fUVVFUlkpWzBdO1xuICAgIGNhY2hlLnNpemUgPSBjaGVja0NhY2hlZFNpemUoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHB1YlN1YkdldFNlbGVjdGVkT3B0aW9ucyhjYWxsYmFjaykge1xuICAgIGlmICghY2FsbGJhY2spIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgc2VsZWN0ZWRPcHRpb25zID0gZ2V0U2VsZWN0ZWRPcHRpb25zKCk7XG4gICAgY2FsbGJhY2soc2VsZWN0ZWRPcHRpb25zLnNpemUgPyBzZWxlY3RlZE9wdGlvbnMuc2l6ZS5jb2RlIDogdW5kZWZpbmVkKTtcbiAgfVxuXG4gIC8vIC9FVkVOVFNcbiAgZnVuY3Rpb24gdXBkYXRlQ29udGVudChzdGF0ZSkge1xuICAgIHZhciBnb1RvTG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb24uaHJlZi5zcGxpdCgnIycpLmxlbmd0aCA+IDE7XG4gICAgaWYgKCFnb1RvTG9jYXRpb24pIHtcbiAgICAgIGlmICghc3RhdGUpIGhpc3RvcnkuYmFjaygpO1xuXG4gICAgICBpZiAoT2JqZWN0LmtleXMoc3RhdGUpLmxlbmd0aCkge1xuICAgICAgICBzdGF0ZSA9IEpTT04ucGFyc2Uoc3RhdGUpO1xuICAgICAgICBpZiAoc3RhdGUuY29udGVudCAmJiBzdGF0ZS5jb250ZW50ICE9PSAnJykge1xuICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXNrdS1jaGFuZ2VkLXRhcmdldF0nKS5pbm5lckhUTUwgPSBzdGF0ZS5jb250ZW50O1xuICAgICAgICAgIHJlaW5pdCgpO1xuICAgICAgICAgIGNvbXBvbmVudHNSZWluaXQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICAvLyAvUFVCU1VCIEVWRU5UIEhBTkRMRVJTXG5cbiAgLyoqXG4gICAqIFtzZXRTZWxsZXJJZFZhbHVlXVxuICAgKiBjaGVja3MgdGhlIHNlbGxlcklkJ3MgcmVmZXJlbmNlLCB0byBmb3JjZSBpdCB0byBhbHdheXMgc2hvdyB0aGF0IHNlbGxlcidzIHByb2R1Y3QgZmlyc3QuXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBmdW5jdGlvbiBzZXRTZWxsZXJJZFZhbHVlKCkge1xuICAgIHZhciByZWZlcnJlciA9IGRvY3VtZW50LnJlZmVycmVyO1xuICAgIHZhciByZWZlcnJlcklzU2VsbGVyUGFnZSA9ICgvbG9qaXN0YS9nKS50ZXN0KHJlZmVycmVyKSB8fCAoL2J1c2NhXFw/c2VsbGVycz0vZykudGVzdChyZWZlcnJlcik7XG5cbiAgICBpZihyZWZlcnJlcklzU2VsbGVyUGFnZSkge1xuICAgICAgdmFyIHNlbGxlcklkID0gZG9jdW1lbnQubG9jYXRpb24uc2VhcmNoLnJlcGxhY2UoJz9zZWxsZXJJZD0nLCAnJyk7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc2VsbGVySWRQZHBDRlMnLCBzZWxsZXJJZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdzZWxsZXJJZFBkcENGUycpO1xuICAgIH1cbiAgfVxuXG4gIChmdW5jdGlvbiAoKSB7XG4gICAgaW5pdChnZXRBcnJheUZyb21Eb20oQ09MT1JfRkxBVk9SX1NJWkVfQ09OVEVOVF9RVUVSWSkpO1xuICAgIHdpbmRvdy5vbnBvcHN0YXRlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBpZiAoZXZlbnQpIHtcbiAgICAgICAgdXBkYXRlQ29udGVudChldmVudC5zdGF0ZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHdpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1za3UtY2hhbmdlZC10YXJnZXRdJykuaW5uZXJIVE1MO1xuICAgICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgICAgY29udGVudCA9IEpTT04uc3RyaW5naWZ5KGNvbnRlbnQpO1xuICAgICAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZShcbiAgICAgICAgICAne1wiY29udGVudFwiOiAnICsgY29udGVudCArICcsIFwicGFnZVwiOiAnICsgY291bnRTdGF0ZSArICd9JyxcbiAgICAgICAgICBkb2N1bWVudC50aXRsZSxcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53aXNobGlzdCAud2lzaGxpc3RfX2hlYXJ0JykgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndpc2hsaXN0IC53aXNobGlzdF9faGVhcnQnKS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGVtcGxhdGUnKSA9PT0gJ3BkcCcpIHtcbiAgICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1Yignd2lzaGxpc3QuY2hlY2tGYXZvcml0ZVByb2R1Y3RzJyk7XG4gICAgfVxuXG4gICAgaWYgKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcXVpY2t2aWV3LWNvbnRhaW5lcicpKSB7XG4gICAgICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5wdWIoJ1NoaXBwaW5nLnJlc3RhcnQnKTtcbiAgICB9XG5cbiAgICBpZiAoY2hlY2tGcmVlU2hpcHBpbmdFbmFibGVkKSB7XG4gICAgICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5zdWIoJ3JldHVybkNoZWNrZWRGcmVlU2hpcHBpbmcnLCByZXF1ZXN0U3VjY2Vzc0hhbmRsZXIpO1xuICAgICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIuc3ViKCd6aXBjb2RlQ29va2llLnJlaW5pdCcsIHJlaW5pdEhhc1ppcENvZGVDb29raWUpO1xuICAgICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIuc3ViKCdzaGlwcGluZ0VsaWdpYmxlQ29va2llLnJlaW5pdCcsIHJlaW5pdEhhc0VsaWdpYmxlQ29va2llKTtcbiAgICB9XG5cbiAgICAvL3dpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnN1YignUmVzdENsaWVudC5iZWZvcmVBamF4JywgcHViU3ViQmVmb3JlQWpheCk7XG4gICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIuc3ViKCdDb2xvckZsYXZvclNpemUuc2VsZWN0LnNpemUnLCBwdWJTdWJHZXRTZWxlY3RlZE9wdGlvbnMpO1xuICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnN1YignQ29sb3JGbGF2b3JTaXplLnJlc3RhcnQnLCBjb21wb25lbnRzUmVpbml0KTtcblxuICAgIC8vY2hlY2tzIHRoZSBzZWxsZXJJZCdzIHJlZmVyZW5jZSwgdG8gZm9yY2UgaXQgdG8gYWx3YXlzIHNob3cgdGhhdCBzZWxsZXIncyBwcm9kdWN0IGZpcnN0XG4gICAgc2V0U2VsbGVySWRWYWx1ZSgpO1xuXG4gIH0oKSk7XG5cbn0oKSk7XG4iXX0=
